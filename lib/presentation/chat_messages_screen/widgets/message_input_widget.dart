import 'package:flutter/material.dart';
import 'package:sizer/sizer.dart';

import '../../../core/app_export.dart';

class MessageInputWidget extends StatefulWidget {
  final TextEditingController controller;
  final FocusNode focusNode;
  final VoidCallback onSendPressed;
  final VoidCallback onAttachmentPressed;

  const MessageInputWidget({
    Key? key,
    required this.controller,
    required this.focusNode,
    required this.onSendPressed,
    required this.onAttachmentPressed,
  }) : super(key: key);

  @override
  State<MessageInputWidget> createState() => _MessageInputWidgetState();
}

class _MessageInputWidgetState extends State<MessageInputWidget> {
  bool _showEmojiPicker = false;
  bool _hasText = false;

  @override
  void initState() {
    super.initState();
    widget.controller.addListener(_onTextChanged);
  }

  @override
  void dispose() {
    widget.controller.removeListener(_onTextChanged);
    super.dispose();
  }

  void _onTextChanged() {
    final hasText = widget.controller.text.trim().isNotEmpty;
    if (hasText != _hasText) {
      setState(() {
        _hasText = hasText;
      });
    }
  }

  void _toggleEmojiPicker() {
    setState(() {
      _showEmojiPicker = !_showEmojiPicker;
    });

    if (_showEmojiPicker) {
      widget.focusNode.unfocus();
    } else {
      widget.focusNode.requestFocus();
    }
  }

  void _insertEmoji(String emoji) {
    final text = widget.controller.text;
    final selection = widget.controller.selection;
    final newText = text.replaceRange(selection.start, selection.end, emoji);

    widget.controller.value = TextEditingValue(
      text: newText,
      selection: TextSelection.collapsed(
        offset: selection.start + emoji.length,
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Container(
          padding: EdgeInsets.symmetric(horizontal: 4.w, vertical: 2.h),
          decoration: BoxDecoration(
            color: AppTheme.lightTheme.colorScheme.surface,
            border: Border(
              top: BorderSide(
                color: AppTheme.lightTheme.dividerColor,
                width: 1,
              ),
            ),
          ),
          child: SafeArea(
            top: false,
            child: Row(
              children: [
                GestureDetector(
                  onTap: widget.onAttachmentPressed,
                  child: Container(
                    padding: EdgeInsets.all(2.w),
                    decoration: BoxDecoration(
                      color: AppTheme.lightTheme.colorScheme.primary.withValues(
                        alpha: 0.1,
                      ),
                      borderRadius: BorderRadius.circular(8),
                    ),
                    child: CustomIconWidget(
                      iconName: 'attach_file',
                      color: AppTheme.lightTheme.colorScheme.primary,
                      size: 20,
                    ),
                  ),
                ),
                SizedBox(width: 2.w),
                Expanded(
                  child: Container(
                    constraints: BoxConstraints(
                      minHeight: 12.w,
                      maxHeight: 30.w,
                    ),
                    decoration: BoxDecoration(
                      color: AppTheme.lightTheme.colorScheme.surface,
                      borderRadius: BorderRadius.circular(24),
                      border: Border.all(
                        color: AppTheme.lightTheme.dividerColor,
                        width: 1,
                      ),
                    ),
                    child: Row(
                      children: [
                        Expanded(
                          child: TextField(
                            controller: widget.controller,
                            focusNode: widget.focusNode,
                            maxLines: null,
                            textInputAction: TextInputAction.newline,
                            decoration: InputDecoration(
                              hintText: 'Digite uma mensagem...',
                              hintStyle: AppTheme
                                  .lightTheme.textTheme.bodyMedium
                                  ?.copyWith(
                                color: AppTheme
                                    .lightTheme.colorScheme.onSurfaceVariant,
                              ),
                              border: InputBorder.none,
                              contentPadding: EdgeInsets.symmetric(
                                horizontal: 4.w,
                                vertical: 3.w,
                              ),
                            ),
                            style: AppTheme.lightTheme.textTheme.bodyMedium,
                            onTap: () {
                              if (_showEmojiPicker) {
                                setState(() {
                                  _showEmojiPicker = false;
                                });
                              }
                            },
                          ),
                        ),
                        GestureDetector(
                          onTap: _toggleEmojiPicker,
                          child: Container(
                            padding: EdgeInsets.all(2.w),
                            child: CustomIconWidget(
                              iconName: _showEmojiPicker
                                  ? 'keyboard'
                                  : 'emoji_emotions',
                              color: _showEmojiPicker
                                  ? AppTheme.lightTheme.colorScheme.primary
                                  : AppTheme
                                      .lightTheme.colorScheme.onSurfaceVariant,
                              size: 20,
                            ),
                          ),
                        ),
                      ],
                    ),
                  ),
                ),
                SizedBox(width: 2.w),
                GestureDetector(
                  onTap: _hasText ? widget.onSendPressed : null,
                  child: Container(
                    padding: EdgeInsets.all(3.w),
                    decoration: BoxDecoration(
                      color: _hasText
                          ? AppTheme.lightTheme.colorScheme.primary
                          : AppTheme.lightTheme.colorScheme.onSurfaceVariant
                              .withValues(alpha: 0.3),
                      borderRadius: BorderRadius.circular(8),
                    ),
                    child: CustomIconWidget(
                      iconName: 'send',
                      color: _hasText
                          ? Colors.white
                          : AppTheme.lightTheme.colorScheme.onSurfaceVariant,
                      size: 20,
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
        if (_showEmojiPicker) _buildEmojiPicker(),
      ],
    );
  }

  Widget _buildEmojiPicker() {
    final emojis = [
      'ðŸ˜€',
      'ðŸ˜ƒ',
      'ðŸ˜„',
      'ðŸ˜',
      'ðŸ˜†',
      'ðŸ˜…',
      'ðŸ˜‚',
      'ðŸ¤£',
      'ðŸ˜Š',
      'ðŸ˜‡',
      'ðŸ™‚',
      'ðŸ™ƒ',
      'ðŸ˜‰',
      'ðŸ˜Œ',
      'ðŸ˜',
      'ðŸ¥°',
      'ðŸ˜˜',
      'ðŸ˜—',
      'ðŸ˜™',
      'ðŸ˜š',
      'ðŸ˜‹',
      'ðŸ˜›',
      'ðŸ˜',
      'ðŸ˜œ',
      'ðŸ¤ª',
      'ðŸ¤¨',
      'ðŸ§',
      'ðŸ¤“',
      'ðŸ˜Ž',
      'ðŸ¤©',
      'ðŸ¥³',
      'ðŸ˜',
      'ðŸ˜’',
      'ðŸ˜ž',
      'ðŸ˜”',
      'ðŸ˜Ÿ',
      'ðŸ˜•',
      'ðŸ™',
      'â˜¹ï¸',
      'ðŸ˜£',
      'ðŸ˜–',
      'ðŸ˜«',
      'ðŸ˜©',
      'ðŸ¥º',
      'ðŸ˜¢',
      'ðŸ˜­',
      'ðŸ˜¤',
      'ðŸ˜ ',
      'ðŸ˜¡',
      'ðŸ¤¬',
      'ðŸ¤¯',
      'ðŸ˜³',
      'ðŸ¥µ',
      'ðŸ¥¶',
      'ðŸ˜±',
      'ðŸ˜¨',
      'ðŸ˜°',
      'ðŸ˜¥',
      'ðŸ˜“',
      'ðŸ¤—',
      'ðŸ¤”',
      'ðŸ¤­',
      'ðŸ¤«',
      'ðŸ¤¥',
      'ðŸ˜¶',
      'ðŸ˜',
      'ðŸ˜‘',
      'ðŸ˜¬',
      'ðŸ™„',
      'ðŸ˜¯',
      'ðŸ˜¦',
      'ðŸ˜§',
      'ðŸ˜®',
      'ðŸ˜²',
      'ðŸ¥±',
      'ðŸ˜´',
      'ðŸ¤¤',
      'ðŸ˜ª',
      'ðŸ˜µ',
      'ðŸ¤',
      'ðŸ¥´',
      'ðŸ¤¢',
      'ðŸ¤®',
      'ðŸ¤§',
      'ðŸ˜·',
      'ðŸ¤’',
      'ðŸ¤•',
      'ðŸ¤‘',
      'ðŸ¤ ',
      'ðŸ˜ˆ',
      'ðŸ‘¿',
      'ðŸ‘¹',
      'ðŸ‘º',
      'ðŸ¤¡',
      'ðŸ’©',
      'ðŸ‘»',
      'ðŸ’€',
      'â˜ ï¸',
      'ðŸ‘½',
      'ðŸ‘¾',
      'ðŸ¤–',
      'ðŸŽƒ',
      'ðŸ˜º',
      'ðŸ˜¸',
      'ðŸ˜¹',
      'ðŸ˜»',
      'ðŸ˜¼',
      'ðŸ˜½',
      'ðŸ™€',
      'ðŸ˜¿',
      'ðŸ˜¾',
      'ðŸ‘‹',
      'ðŸ¤š',
      'ðŸ–ï¸',
      'âœ‹',
      'ðŸ––',
      'ðŸ‘Œ',
      'ðŸ¤',
      'âœŒï¸',
      'ðŸ¤ž',
      'ðŸ¤Ÿ',
      'ðŸ¤˜',
      'ðŸ¤™',
      'ðŸ‘ˆ',
      'ðŸ‘‰',
      'ðŸ‘†',
      'ðŸ–•',
      'ðŸ‘‡',
      'â˜ï¸',
      'ðŸ‘',
      'ðŸ‘Ž',
      'ðŸ‘Š',
      'âœŠ',
      'ðŸ¤›',
      'ðŸ¤œ',
      'ðŸ‘',
      'ðŸ™Œ',
      'ðŸ‘',
      'ðŸ¤²',
      'ðŸ¤',
      'ðŸ™',
      'âœï¸',
      'ðŸ’…',
      'ðŸ¤³',
      'ðŸ’ª',
      'ðŸ¦¾',
      'ðŸ¦¿',
      'ðŸ¦µ',
      'ðŸ¦¶',
      'ðŸ‘‚',
      'ðŸ¦»',
      'ðŸ‘ƒ',
      'ðŸ§ ',
      'ðŸ«€',
      'ðŸ«',
      'ðŸ¦·',
      'ðŸ¦´',
      'ðŸ‘€',
      'ðŸ‘ï¸',
      'ðŸ‘…',
      'ðŸ‘„',
      'ðŸ’‹',
      'ðŸ©¸',
      'ðŸ‘¶',
      'ðŸ§’',
      'ðŸ‘¦',
      'ðŸ‘§',
      'ðŸ§‘',
      'ðŸ‘±',
      'ðŸ‘¨',
      'ðŸ§”',
      'ðŸ‘©',
      'ðŸ§“',
      'ðŸ‘´',
      'ðŸ‘µ',
      'ðŸ™',
      'ðŸ™Ž',
      'ðŸ™…',
      'ðŸ™†',
      'ðŸ’',
      'ðŸ™‹',
      'ðŸ§',
      'ðŸ™‡',
      'ðŸ¤¦',
      'ðŸ¤·',
      'ðŸ‘®',
      'ðŸ•µï¸',
      'ðŸ’‚',
      'ðŸ¥·',
      'ðŸ‘·',
      'ðŸ¤´',
      'ðŸ‘¸',
      'ðŸ‘³',
      'ðŸ‘²',
      'ðŸ§•',
      'ðŸ¤µ',
      'ðŸ‘°',
      'ðŸ¤°',
      'ðŸ¤±',
      'ðŸ‘¼',
      'ðŸŽ…',
      'ðŸ¤¶',
      'ðŸ¦¸',
      'ðŸ¦¹',
      'ðŸ§™',
      'ðŸ§š',
      'ðŸ§›',
      'ðŸ§œ',
      'ðŸ§',
      'ðŸ§ž',
      'ðŸ§Ÿ',
      'ðŸ’†',
      'ðŸ’‡',
      'ðŸš¶',
      'ðŸ§',
      'ðŸ§Ž',
      'ðŸƒ',
      'ðŸ’ƒ',
      'ðŸ•º',
      'ðŸ•´ï¸',
      'ðŸ‘¯',
      'ðŸ§–',
      'ðŸ§—',
      'ðŸ¤º',
      'ðŸ‡',
      'â›·ï¸',
      'ðŸ‚',
      'ðŸŒï¸',
      'ðŸ„',
      'ðŸš£',
      'ðŸŠ',
      'â›¹ï¸',
      'ðŸ‹ï¸',
      'ðŸš´',
      'ðŸšµ',
      'ðŸ¤¸',
      'ðŸ¤¼',
      'ðŸ¤½',
      'ðŸ¤¾',
      'ðŸ¤¹',
      'ðŸ§˜',
      'ðŸ›€',
      'ðŸ›Œ',
      'ðŸ‘­',
      'ðŸ‘«',
      'ðŸ‘¬',
      'ðŸ’',
      'ðŸ’‘',
      'ðŸ‘ª',
      'ðŸ—£ï¸',
      'ðŸ‘¤',
      'ðŸ‘¥',
      'ðŸ«‚',
      'ðŸ‘£',
      'ðŸ¦°',
      'ðŸ¦±',
      'ðŸ¦³',
      'ðŸ¦²',
      'ðŸµ',
      'ðŸ’',
      'ðŸ¦',
      'ðŸ¦§',
      'ðŸ¶',
      'ðŸ•',
      'ðŸ¦®',
      'ðŸ•â€ðŸ¦º',
      'ðŸ©',
      'ðŸº',
      'ðŸ¦Š',
      'ðŸ¦',
      'ðŸ±',
      'ðŸˆ',
      'ðŸˆâ€â¬›',
      'ðŸ¦',
      'ðŸ¯',
      'ðŸ…',
      'ðŸ†',
      'ðŸ´',
      'ðŸŽ',
      'ðŸ¦„',
      'ðŸ¦“',
      'ðŸ¦Œ',
      'ðŸ¦¬',
      'ðŸ®',
      'ðŸ‚',
      'ðŸƒ',
      'ðŸ„',
      'ðŸ·',
      'ðŸ–',
      'ðŸ—',
      'ðŸ½',
      'ðŸ',
      'ðŸ‘',
      'ðŸ',
      'ðŸª',
      'ðŸ«',
      'ðŸ¦™',
      'ðŸ¦’',
      'ðŸ˜',
      'ðŸ¦£',
      'ðŸ¦',
      'ðŸ¦›',
      'ðŸ­',
      'ðŸ',
      'ðŸ€',
      'ðŸ¹',
      'ðŸ°',
      'ðŸ‡',
      'ðŸ¿ï¸',
      'ðŸ¦«',
      'ðŸ¦”',
      'ðŸ¦‡',
      'ðŸ»',
      'ðŸ»â€â„ï¸',
      'ðŸ¨',
      'ðŸ¼',
      'ðŸ¦¥',
      'ðŸ¦¦',
      'ðŸ¦¨',
      'ðŸ¦˜',
      'ðŸ¦¡',
      'ðŸ¾',
      'ðŸ¦ƒ',
      'ðŸ”',
      'ðŸ“',
      'ðŸ£',
      'ðŸ¤',
      'ðŸ¥',
      'ðŸ¦',
      'ðŸ§',
      'ðŸ•Šï¸',
      'ðŸ¦…',
      'ðŸ¦†',
      'ðŸ¦¢',
      'ðŸ¦‰',
      'ðŸ¦¤',
      'ðŸª¶',
      'ðŸ¦©',
      'ðŸ¦š',
      'ðŸ¦œ',
      'ðŸ¸',
      'ðŸŠ',
      'ðŸ¢',
      'ðŸ¦Ž',
      'ðŸ',
      'ðŸ²',
      'ðŸ‰',
      'ðŸ¦•',
      'ðŸ¦–',
      'ðŸ³',
      'ðŸ‹',
      'ðŸ¬',
      'ðŸ¦­',
      'ðŸŸ',
      'ðŸ ',
      'ðŸ¡',
      'ðŸ¦ˆ',
      'ðŸ™',
      'ðŸš',
      'ðŸŒ',
      'ðŸ¦‹',
      'ðŸ›',
      'ðŸœ',
      'ðŸ',
      'ðŸª²',
      'ðŸž',
      'ðŸ¦—',
      'ðŸ•·ï¸',
      'ðŸ•¸ï¸',
      'ðŸ¦‚',
      'ðŸ¦Ÿ',
      'ðŸª°',
      'ðŸª±',
      'ðŸ¦ ',
      'ðŸ’',
      'ðŸŒ¸',
      'ðŸ’®',
      'ðŸµï¸',
      'ðŸŒ¹',
      'ðŸ¥€',
      'ðŸŒº',
      'ðŸŒ»',
      'ðŸŒ¼',
      'ðŸŒ·',
      'ðŸŒ±',
      'ðŸª´',
      'ðŸŒ²',
      'ðŸŒ³',
      'ðŸŒ´',
      'ðŸŒµ',
      'ðŸŒ¶ï¸',
      'ðŸ„',
      'ðŸŒ¾',
      'ðŸ’«',
      'â­',
      'ðŸŒŸ',
      'âœ¨',
      'âš¡',
      'â˜„ï¸',
      'ðŸ’¥',
      'ðŸ”¥',
      'ðŸŒªï¸',
      'ðŸŒˆ',
      'â˜€ï¸',
      'ðŸŒ¤ï¸',
      'â›…',
      'ðŸŒ¦ï¸',
      'ðŸŒ§ï¸',
      'â›ˆï¸',
      'ðŸŒ©ï¸',
      'ðŸŒ¨ï¸',
      'â„ï¸',
      'â˜ƒï¸',
      'â›„',
      'ðŸŒ¬ï¸',
      'ðŸ’¨',
      'ðŸ’§',
      'ðŸ’¦',
      'â˜”',
      'â˜‚ï¸',
      'ðŸŒŠ',
      'ðŸŒ«ï¸',
      'ðŸ',
      'ðŸŽ',
      'ðŸ',
      'ðŸŠ',
      'ðŸ‹',
      'ðŸŒ',
      'ðŸ‰',
      'ðŸ‡',
      'ðŸ“',
      'ðŸ«',
      'ðŸˆ',
      'ðŸ’',
      'ðŸ‘',
      'ðŸ¥­',
      'ðŸ',
      'ðŸ¥¥',
      'ðŸ¥',
      'ðŸ…',
      'ðŸ†',
      'ðŸ¥‘',
      'ðŸ¥¦',
      'ðŸ¥¬',
      'ðŸ¥’',
      'ðŸŒ¶ï¸',
      'ðŸ«‘',
      'ðŸŒ½',
      'ðŸ¥•',
      'ðŸ«’',
      'ðŸ§„',
      'ðŸ§…',
      'ðŸ¥”',
      'ðŸ ',
      'ðŸ¥',
      'ðŸ¥¯',
      'ðŸž',
      'ðŸ¥–',
      'ðŸ¥¨',
      'ðŸ§€',
      'ðŸ¥š',
      'ðŸ³',
      'ðŸ§ˆ',
      'ðŸ¥ž',
      'ðŸ§‡',
      'ðŸ¥“',
      'ðŸ¥©',
      'ðŸ—',
      'ðŸ–',
      'ðŸ¦´',
      'ðŸŒ­',
      'ðŸ”',
      'ðŸŸ',
      'ðŸ•',
      'ðŸ«“',
      'ðŸ¥ª',
      'ðŸ¥™',
      'ðŸ§†',
      'ðŸŒ®',
      'ðŸŒ¯',
      'ðŸ«”',
      'ðŸ¥—',
      'ðŸ¥˜',
      'ðŸ«•',
      'ðŸ¥«',
      'ðŸ',
      'ðŸœ',
      'ðŸ²',
      'ðŸ›',
      'ðŸ£',
      'ðŸ±',
      'ðŸ¥Ÿ',
      'ðŸ¦ª',
      'ðŸ¤',
      'ðŸ™',
      'ðŸš',
      'ðŸ˜',
      'ðŸ¥',
      'ðŸ¥ ',
      'ðŸ¥®',
      'ðŸ¢',
      'ðŸ¡',
      'ðŸ§',
      'ðŸ¨',
      'ðŸ¦',
      'ðŸ¥§',
      'ðŸ§',
      'ðŸ°',
      'ðŸŽ‚',
      'ðŸ®',
      'ðŸ­',
      'ðŸ¬',
      'ðŸ«',
      'ðŸ¿',
      'ðŸ©',
      'ðŸª',
      'ðŸŒ°',
      'ðŸ¥œ',
      'ðŸ¯',
      'ðŸ¥›',
      'ðŸ¼',
      'â˜•',
      'ðŸµ',
      'ðŸ§ƒ',
      'ðŸ¥¤',
      'ðŸ§‹',
      'ðŸ¶',
      'ðŸº',
      'ðŸ»',
      'ðŸ¥‚',
      'ðŸ·',
      'ðŸ¥ƒ',
      'ðŸ¸',
      'ðŸ¹',
      'ðŸ§‰',
      'ðŸ¾',
      'ðŸ§Š',
      'ðŸ¥„',
      'ðŸ´',
      'ðŸ½ï¸',
      'ðŸ¥£',
      'ðŸ¥¡',
      'ðŸ¥¢',
      'ðŸ§‚',
      'âš½',
      'ðŸ€',
      'ðŸˆ',
      'âš¾',
      'ðŸ¥Ž',
      'ðŸŽ¾',
      'ðŸ',
      'ðŸ‰',
      'ðŸ¥',
      'ðŸŽ±',
      'ðŸª€',
      'ðŸ“',
      'ðŸ¸',
      'ðŸ’',
      'ðŸ‘',
      'ðŸ¥',
      'ðŸ',
      'ðŸªƒ',
      'ðŸ¥…',
      'â›³',
      'ðŸª',
      'ðŸ¹',
      'ðŸŽ£',
      'ðŸ¤¿',
      'ðŸ¥Š',
      'ðŸ¥‹',
      'ðŸŽ½',
      'ðŸ›¹',
      'ðŸ›·',
      'â›¸ï¸',
      'ðŸ¥Œ',
      'ðŸŽ¿',
      'â›·ï¸',
      'ðŸ‚',
      'ðŸª‚',
      'ðŸ‹ï¸â€â™€ï¸',
      'ðŸ‹ï¸',
      'ðŸ‹ï¸â€â™‚ï¸',
      'ðŸ¤¼â€â™€ï¸',
      'ðŸ¤¼',
      'ðŸ¤¼â€â™‚ï¸',
      'ðŸ¤¸â€â™€ï¸',
      'ðŸ¤¸',
      'ðŸ¤¸â€â™‚ï¸',
      'â›¹ï¸â€â™€ï¸',
      'â›¹ï¸',
      'â›¹ï¸â€â™‚ï¸',
      'ðŸ¤º',
      'ðŸ¤¾â€â™€ï¸',
      'ðŸ¤¾',
      'ðŸ¤¾â€â™‚ï¸',
      'ðŸŒï¸â€â™€ï¸',
      'ðŸŒï¸',
      'ðŸŒï¸â€â™‚ï¸',
      'ðŸ‡',
      'ðŸ§˜â€â™€ï¸',
      'ðŸ§˜',
      'ðŸ§˜â€â™‚ï¸',
      'ðŸ„â€â™€ï¸',
      'ðŸ„',
      'ðŸ„â€â™‚ï¸',
      'ðŸŠâ€â™€ï¸',
      'ðŸŠ',
      'ðŸŠâ€â™‚ï¸',
      'ðŸ¤½â€â™€ï¸',
      'ðŸ¤½',
      'ðŸ¤½â€â™‚ï¸',
      'ðŸš£â€â™€ï¸',
      'ðŸš£',
      'ðŸš£â€â™‚ï¸',
      'ðŸ§—â€â™€ï¸',
      'ðŸ§—',
      'ðŸ§—â€â™‚ï¸',
      'ðŸšµâ€â™€ï¸',
      'ðŸšµ',
      'ðŸšµâ€â™‚ï¸',
      'ðŸš´â€â™€ï¸',
      'ðŸš´',
      'ðŸš´â€â™‚ï¸',
      'ðŸ†',
      'ðŸ¥‡',
      'ðŸ¥ˆ',
      'ðŸ¥‰',
      'ðŸ…',
      'ðŸŽ–ï¸',
      'ðŸµï¸',
      'ðŸŽ—ï¸',
      'ðŸŽ«',
      'ðŸŽŸï¸',
      'ðŸŽª',
      'ðŸ¤¹â€â™€ï¸',
      'ðŸ¤¹',
      'ðŸ¤¹â€â™‚ï¸',
      'ðŸŽ­',
      'ðŸ©°',
      'ðŸŽ¨',
      'ðŸŽ¬',
      'ðŸŽ¤',
      'ðŸŽ§',
      'ðŸŽ¼',
      'ðŸŽµ',
      'ðŸŽ¶',
      'ðŸ¥‡',
      'ðŸ¥ˆ',
      'ðŸ¥‰',
      'ðŸ†',
      'ðŸ…',
      'ðŸŽ–ï¸',
      'ðŸµï¸',
      'ðŸŽ—ï¸',
      'ðŸŽ«',
      'ðŸŽŸï¸',
      'ðŸŽª',
      'ðŸ¤¹â€â™€ï¸',
      'ðŸ¤¹',
      'ðŸ¤¹â€â™‚ï¸',
      'ðŸŽ­',
      'ðŸ©°',
      'ðŸŽ¨',
      'ðŸŽ¬',
      'ðŸŽ¤',
      'ðŸŽ§',
      'ðŸŽ¼',
      'ðŸŽµ',
      'ðŸŽ¶',
    ];

    return Container(
      height: 40.h,
      decoration: BoxDecoration(
        color: AppTheme.lightTheme.colorScheme.surface,
        border: Border(
          top: BorderSide(color: AppTheme.lightTheme.dividerColor, width: 1),
        ),
      ),
      child: Column(
        children: [
          Container(
            padding: EdgeInsets.symmetric(horizontal: 4.w, vertical: 1.h),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text('Emojis', style: AppTheme.lightTheme.textTheme.titleSmall),
                GestureDetector(
                  onTap: () {
                    setState(() {
                      _showEmojiPicker = false;
                    });
                  },
                  child: CustomIconWidget(
                    iconName: 'keyboard_hide',
                    color: AppTheme.lightTheme.colorScheme.onSurfaceVariant,
                    size: 20,
                  ),
                ),
              ],
            ),
          ),
          Expanded(
            child: GridView.builder(
              padding: EdgeInsets.symmetric(horizontal: 4.w),
              gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                crossAxisCount: 8,
                childAspectRatio: 1,
                crossAxisSpacing: 1.w,
                mainAxisSpacing: 1.w,
              ),
              itemCount: emojis.length,
              itemBuilder: (context, index) {
                final emoji = emojis[index];
                return GestureDetector(
                  onTap: () => _insertEmoji(emoji),
                  child: Container(
                    decoration: BoxDecoration(
                      borderRadius: BorderRadius.circular(8),
                    ),
                    child: Center(
                      child: Text(emoji, style: TextStyle(fontSize: 20.sp)),
                    ),
                  ),
                );
              },
            ),
          ),
        ],
      ),
    );
  }
}
